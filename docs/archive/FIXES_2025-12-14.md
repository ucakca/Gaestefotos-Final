# Kritische Fixes - 14.12.2025

## ‚úÖ BEHOBENE PROBLEME

### 1. Challenge-Upload Modal: Buttons verschwinden
**Problem:** Nach Foto-Upload verschwinden Buttons au√üerhalb des sichtbaren Bereichs
**L√∂sung:**
- Buttons sind jetzt **innerhalb des scrollbaren Containers** wenn ein Bild angezeigt wird
- Layout umstrukturiert: Header oben, scrollbarer Content-Bereich in der Mitte, Buttons am Ende des scrollbaren Bereichs
- `max-h-[40vh]` f√ºr Bild-Preview um Platz f√ºr Buttons zu schaffen
**Datei:** `packages/frontend/src/components/ChallengeCompletion.tsx`

### 2. Uploadername wird nicht angezeigt (zeigt Eventname)
**Problem:** Nach Upload steht noch Eventname statt Uploadername in Detail-Ansicht
**L√∂sung:**
- Pr√ºfung erweitert: `uploadedBy && uploadedBy.trim()` statt nur `uploadedBy`
- Fallback zu `eventTitle` nur wenn `uploadedBy` null, undefined oder leer ist
**Datei:** `packages/frontend/src/components/ModernPhotoGrid.tsx` Zeile 485-491

### 3. Dashboard zeigt "Uploader: Unbekannt"
**Problem:** Im Dashboard steht "Uploader: Unbekannt" obwohl Name eingegeben wurde
**Ursache:** Backend speichert korrekt (`uploadedBy: "max mustermann"` im API-Test best√§tigt)
**L√∂sung:** Frontend-Code pr√ºft jetzt korrekt ob `uploadedBy` existiert und nicht leer ist
**Datei:** `packages/frontend/src/components/ModernPhotoGrid.tsx`

### 4. Foto-URLs werden nicht geladen
**Problem:** `ERR_NAME_NOT_RESOLVED` Fehler f√ºr Foto-URLs
**Status:** URLs werden korrekt generiert (`/api/photos/{photoId}/file`)
- Backend-Route existiert: `GET /api/photos/:photoId/file` ‚úÖ
- API-Test zeigt korrekte URLs: `"/api/photos/9c01e091-d0e1-4aeb-a300-f3143eea4c2e/file"`
- `onError` Fallback vorhanden f√ºr absolute URLs

## üîç TECHNISCHE DETAILS

### Backend API Response
```json
{
  "id": "9c01e091-d0e1-4aeb-a300-f3143eea4c2e",
  "uploadedBy": "max mustermann",
  "url": "/api/photos/9c01e091-d0e1-4aeb-a300-f3143eea4c2e/file",
  "storagePath": "events/20f2b85a-a8e9-4036-b26b-79d1e994ce97/9c01e091-d0e1-4aeb-a300-f3143eea4c2e_max-mustermann.jpg"
}
```

### Frontend √Ñnderungen
1. **ChallengeCompletion.tsx:**
   - Layout umstrukturiert: Header, scrollbarer Content, Buttons innerhalb Content
   - Buttons erscheinen jetzt immer sichtbar am Ende des scrollbaren Bereichs

2. **ModernPhotoGrid.tsx:**
   - Uploadername-Anzeige: `uploadedBy && uploadedBy.trim() ? uploadedBy : eventTitle`
   - Avatar-Initial: Gleiche Logik f√ºr Initial-Buchstaben

## ‚ö†Ô∏è WICHTIGE HINWEISE

1. **Browser-Cache:** Hard Refresh erforderlich (`Ctrl+Shift+R` oder `Cmd+Shift+R`)
2. **Alte Fotos:** Fotos die vor der Korrektur hochgeladen wurden haben `uploadedBy: null` (erwartetes Verhalten)
3. **Neue Uploads:** Ab sofort sollte Uploadername korrekt gespeichert und angezeigt werden

## üìã TEST-CHECKLISTE

Bitte testen:
- [ ] Neues Foto hochladen mit Namen ‚Üí Uploadername sollte in Detail-Ansicht erscheinen (nicht Eventname)
- [ ] Dashboard: Uploadername sollte angezeigt werden (nicht "Unbekannt")
- [ ] Challenge erf√ºllen: Buttons sollten sichtbar bleiben nach Foto-Upload
- [ ] Challenge erf√ºllen: Uploadername sollte in Sprechblase erscheinen
- [ ] Fotos sollten korrekt geladen werden (keine `ERR_NAME_NOT_RESOLVED` Fehler)

## üöÄ DEPLOYMENT

- Frontend neu gebaut: ‚úÖ
- Frontend neu gestartet: ‚úÖ
- Backend l√§uft: ‚úÖ

