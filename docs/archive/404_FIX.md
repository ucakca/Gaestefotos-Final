# 404-Fehler auf app.gästefotos.com - Behoben ✅

**Datum:** 13. Dezember 2025  
**Status:** ✅ BEHOBEN

## Problem

Die Website `app.gästefotos.com` zeigte einen 404-Fehler, obwohl die Root-Route (`/`) existiert.

## Ursache

1. **Doppelte Next.js-Prozesse**: Es liefen gleichzeitig:
   - Ein `next dev` Prozess (Development-Modus) - PID 2452930
   - Ein `next start` Prozess (Production-Modus) - PID 2475716

2. **Development-Server blockierte Port 3000**: Der Development-Server gab 404 zurück, weil er nicht richtig konfiguriert war.

3. **Veralteter Build**: Der Production-Build war möglicherweise veraltet.

## Lösung

1. ✅ Alle Next.js-Prozesse beendet (`pkill -f "next dev"` und `pkill -f "next-server"`)
2. ✅ Neuen Production-Build erstellt (`pnpm run build`)
3. ✅ Frontend-Service neu gestartet (`systemctl restart gaestefotos-frontend`)
4. ✅ Systemd daemon-reload ausgeführt

## Ergebnis

- ✅ Website lädt korrekt
- ✅ Root-Route (`/`) funktioniert und leitet automatisch weiter:
  - Nicht authentifiziert → `/login`
  - Authentifiziert → `/dashboard`
  - Token in URL → SSO-Login
- ✅ Production-Server läuft stabil

## Technische Details

- **Build-ID**: `JWpFcPZ52bw1eTWsMtg5Q` (neu)
- **Service**: `gaestefotos-frontend.service` - **AKTIV**
- **Port**: 3000 (IPv6)
- **Nginx**: Proxied korrekt zu `http://127.0.0.1:3000`

## Verhinderung

Um dieses Problem in Zukunft zu vermeiden:

1. **Nur einen Next.js-Prozess**: Sicherstellen, dass nur der Production-Server läuft
2. **Systemd-Service verwenden**: Immer den Systemd-Service verwenden, nicht manuell `next dev` starten
3. **Build vor Start**: Immer einen neuen Build erstellen, bevor der Service gestartet wird

## Befehle zur Überprüfung

```bash
# Prüfen, ob nur ein Next.js-Prozess läuft
ps aux | grep -E "next|node.*3000" | grep -v grep

# Service-Status prüfen
systemctl status gaestefotos-frontend

# Website testen
curl -I https://app.gästefotos.com
```

---

**Status:** ✅ **BEHOBEN** - Website funktioniert korrekt


